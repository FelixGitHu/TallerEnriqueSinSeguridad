

<div class="top-row pl-4 navbar navbar-dark">
    <a class="navbar-brand" href="">
        <img src="logoBlanco.png" width="30" height="30" class="d-inline-block align-top" alt="Logo Taller">
        <b>Taller Enrique Peña</b>
    </a>

    <button class="navbar-toggler" @onclick="ToggleNavMenu">
        <span class="navbar-toggler-icon"></span>
    </button>
</div>
<div class="@NavMenuCssClass" @onclick="ToggleNavMenu" style="font-size: small; background-color: #1e1150 ">
    <ul class="nav flex-column" style="color:black">

        <li class="nav-item px-3">
            <NavLink class="nav-link" href="" Match="NavLinkMatch.All">
                <span class="oi oi-home" aria-hidden="true"></span> Home
            </NavLink>
        </li>
        <li class="nav-item px-3">
            <NavLink class="nav-link" href="/clientes" Match="NavLinkMatch.All">
                <span class="oi oi-people" aria-hidden="true"></span> Clientes
            </NavLink>
        </li>
        <li class="nav-item px-3">
            <NavLink class="nav-link" href="/vehiculos" Match="NavLinkMatch.All">
                <span class="oi oi-dial" aria-hidden="true"></span> Vehículos
            </NavLink>
        </li>
        <AuthorizeView Roles="admin">
            <Authorized>
                <li class="nav-item px-3">
                    <NavLink class="nav-link" href="/mecanicos" Match="NavLinkMatch.All">
                        <span class="oi oi-people" aria-hidden="true"></span> Mecánicos
                    </NavLink>
                </li>
            </Authorized>
        </AuthorizeView>
        <li class="nav-item px-3">
            <NavLink class="nav-link" href="/articulos" Match="NavLinkMatch.All">
                <span class="oi oi-list" aria-hidden="true"></span> Artículos
            </NavLink>
        </li>

        <li class="nav-item px-3">
            <NavLink class="nav-link dropdown-toggle" href="#" @onclick="()=>_isExpanded = !_isExpanded">
                <span class="oi oi-list-rich" aria-hidden="true"></span>Transacciones
            </NavLink>
            @if (_isExpanded)
            {
                <ul class="collapse list-unstyled" id="pageSubmenu">
                    <li class="nav-item px-3">
                        <NavLink class="nav-link" href="/compras" Match="NavLinkMatch.All">
                            <span class="oi oi-cart" aria-hidden="true"></span> Compras
                        </NavLink>
                    </li>
                    <li class="nav-item px-3">
                        <NavLink class="nav-link" href="/ventas" Match="NavLinkMatch.All">
                            <span class="oi oi-cart" aria-hidden="true"></span> Ventas
                        </NavLink>
                    </li>
                    <li class="nav-item px-3">
                        <NavLink class="nav-link" href="/cierres" Match="NavLinkMatch.All">
                            <span class="oi oi-dollar" aria-hidden="true"></span> Cierre de Caja
                        </NavLink>
                    </li>

                </ul>

             }

        </li>
        
        <li class="nav-item px-3">
            <NavLink class="nav-link dropdown-toggle" href="#" @onclick="()=>_isExpandedInventario = !_isExpandedInventario">
                <span class="oi oi-list-rich" aria-hidden="true"></span>Servicios
            </NavLink>
            @if (_isExpandedInventario)
            {
                <AuthorizeView Roles="admin">
                    <Authorized>
                        <li class="nav-item px-3">
                            <NavLink class="nav-link" href="/categorias" Match="NavLinkMatch.All">
                                <span class="oi oi-list-rich" aria-hidden="true"></span> Categorías
                            </NavLink>
                        </li>
                    </Authorized>
                </AuthorizeView>


                <AuthorizeView Roles="admin">
                    <Authorized>
                        <li class="nav-item px-3">
                            <NavLink class="nav-link" href="/servicios" Match="NavLinkMatch.All">
                                <span class="oi oi-list-rich" aria-hidden="true"></span> Servicios
                            </NavLink>
                        </li>
                    </Authorized>
                </AuthorizeView>

            }

        </li>

        <AuthorizeView Roles="admin">
            <Authorized>
                <li class="nav-item px-3">
                    <NavLink class="nav-link" href="/Proveedores" Match="NavLinkMatch.All">
                        <span class="oi oi-people" aria-hidden="true"></span> Proveedores
                    </NavLink>
                </li>
            </Authorized>
        </AuthorizeView>



        <AuthorizeView Roles="admin">
            <Authorized>
                <li class="nav-item px-3">
                    <NavLink class="nav-link" href="/inventarios" Match="NavLinkMatch.All">
                        <span class="oi oi-graph" aria-hidden="true"></span> Inventario
                    </NavLink>
                </li>
            </Authorized>
        </AuthorizeView>

        @*<AuthorizeView Roles="admin">
            <Authorized>*@
        <li class="nav-item px-3">
            <NavLink class="nav-link" href="usuarios" Match="NavLinkMatch.All">
                <span class="oi oi-person" aria-hidden="true"></span> Usuarios
            </NavLink>
        </li>
        @*</Authorized>
            </AuthorizeView>*@

        <AuthorizeView Roles="admin">
            <Authorized>
                <li class="nav-item px-3">
                    <NavLink class="nav-link" href="/Configuracions" Match="NavLinkMatch.All">
                        <span class="oi oi-cog" aria-hidden="true"></span> Empresa
                    </NavLink>
                </li>
            </Authorized>
        </AuthorizeView>
    </ul>

</div>


@code {
    private bool collapseNavMenu = true;
    private bool expandSubMenu = false;

    private string NavMenuCssClass => collapseNavMenu ? "collapse" : null;

    private void ToggleNavMenu()
    {
        collapseNavMenu = !collapseNavMenu;
    }
    bool _isExpanded = false;
    bool _isExpandedInventario = false;
}
